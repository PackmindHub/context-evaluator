# AI Agent Assumption Correction Log
#
# This file captures assumptions about the codebase that AI agents made
# and later discovered were incorrect. It helps identify documentation gaps
# and improves onboarding context for future AI agent sessions.
#
# Review this file periodically to:
# - Understand what's confusing about the codebase
# - Improve CLAUDE.md with better context
# - Identify misleading names or structures to refactor
# - See common onboarding friction points
# - Enhance documentation for humans too
#
# File is managed by the codebase-assumption-capture skill.
# Schema: See .claude/skills/codebase-assumption-capture/SKILL.md

# Example entry showing the skill in action:

- timestamp: 2026-01-09T18:00:00Z
  category: 'structure'
  assumption: 'Example assumption showing the skill format - no real assumption was incorrect here'
  reality: 'This is a placeholder demonstrating the YAML structure'
  discovery_point: 'Created this file as part of skill initialization'
  impact: 'low'
  misleading_signals:
    - 'This is just an example entry'
  documentation_gap: 'No real documentation gap - this demonstrates the format for future entries'
  files_explored:
    - .claude/skills/codebase-assumption-capture/SKILL.md
  tags:
    - 'example'
    - 'skill-initialization'

- timestamp: 2026-01-21T18:20:00Z
  category: configuration
  assumption: Assumed EVALUATOR_CONFIGS contained exactly 19 entries matching the evaluator files in prompts/evaluators/
  reality: EVALUATOR_CONFIGS contains 20 entries including "00-file-consistency.md" which is an internal validator, not an LLM prompt evaluator. The actual count of LLM evaluators is 19.
  discovery_point: Unit tests failed with "Expected 19, Received 20" when using Object.keys(EVALUATOR_CONFIGS).length. Checked EVALUATOR_CONFIGS and found the extra entry.
  impact: medium
  misleading_signals:
    - EVALUATOR_CONFIGS is named as if it contains all evaluators
    - No comment distinguishing internal validators from LLM evaluators
    - File is in evaluators directory but isn't counted in EVALUATOR_FILES array
  documentation_gap: Add comment in evaluator-types.ts clarifying that EVALUATOR_CONFIGS includes internal validators like 00-file-consistency.md which are not LLM prompt evaluators
  files_explored:
    - src/shared/evaluation/evaluator-types.ts
    - src/shared/evaluation/runner.ts
    - prompts/evaluators/
  tags:
    - configuration
    - evaluator-count
    - internal-validators

- timestamp: 2026-01-21T18:50:00Z
  category: testing
  assumption: Assumed bun test would only run tests in src/ and frontend/ directories
  reality: bun test runs tests in tmp/clones/ directory which contains tests from previously cloned repositories, causing hundreds of test failures from missing dependencies
  discovery_point: After running tests, saw 968 tests across 300 files with 258 failures, all from tmp/clones/agents-eval-*/. Realized bun test finds all .spec.ts files recursively.
  impact: low
  misleading_signals:
    - Expected test runner to respect common ignore patterns
    - tmp/ directory name suggests temporary/ignored content
  documentation_gap: Add tmp/ to .gitignore or create bunfig.toml to exclude tmp/ from test runs. Document in CLAUDE.md that tmp/clones should be cleaned periodically.
  files_explored:
    - tmp/clones/
    - package.json
  tags:
    - testing
    - test-discovery
    - temporary-files

- timestamp: 2026-01-25T09:40:00Z
  category: configuration
  assumption: Assumed CSS import in App.tsx ("import '../dist/output.css'") would be processed correctly by Bun's HTML bundler and include all Tailwind @apply styles
  reality: Bun's bundler creates a separate chunk CSS file (chunk-*.css) that is missing many Tailwind styles from @apply directives inside @layer components. The full compiled CSS is only in the output.css generated by Tailwind CLI.
  discovery_point: Tab navigation was broken (all tabs merged together). JavaScript inspection showed display:block instead of display:flex. Found .tab-navigation rule was in output.css but NOT in the bundled chunk-*.css being loaded by the browser.
  impact: high
  misleading_signals:
    - CSS import in JS is a standard pattern for bundlers
    - Bun's build worked without errors
    - The chunk CSS file was created (seemed to process CSS)
    - No warnings about @apply not being processed
  documentation_gap: Frontend README or CLAUDE.md should document that Tailwind CSS must be linked directly in HTML (not imported in JS) when using the Tailwind CLI build approach with Bun's bundler
  files_explored:
    - frontend/index.html
    - frontend/src/App.tsx
    - frontend/dist/output.css
    - frontend/dist/chunk-9rtrcknk.css
    - frontend/server.ts
  tags:
    - css
    - tailwind
    - bun-bundler
    - frontend-build

- timestamp: 2026-01-30T13:10:00Z
  category: configuration
  assumption: Assumed CSS file would be automatically discovered and imported by Vite dev server
  reality: CSS must be explicitly imported in App.tsx entry point (import '../dist/output.css') for Vite to serve it
  discovery_point: Frontend rendered completely unstyled despite CSS being built by Tailwind. Checked App.tsx and found no CSS import statement.
  impact: medium
  misleading_signals:
    - CSS file exists and is built successfully
    - Frontend dev server runs without errors
    - HTML structure renders correctly
    - Common pattern in some bundlers to auto-discover CSS
  documentation_gap: CLAUDE.md "Frontend Style Changes" section should mention that CSS import in App.tsx is required, not optional
  files_explored:
    - frontend/index.html
    - frontend/src/App.tsx
    - frontend/dist/output.css
  tags:
    - css
    - vite
    - frontend-build
    - dev-server
